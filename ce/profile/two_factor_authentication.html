<!DOCTYPE HTML>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <title>Two-factor Authentication (2FA) - GitLab中文文档</title>
  <meta name="description" content="GitLab中文社区提供GitLab社区版，GitLab企业版，Omnibus GitLab，GitLab Runner全系列中文文档！">
  <link rel="stylesheet" href="../../assets/stylesheets/stylesheet-v6.css">
  <link rel="stylesheet" href="../../assets/stylesheets/highlight-v4.css">
  <script async src="../../assets/javascripts/docs.js"></script>
  <link href='https://fonts.proxy.ustclug.org/css?family=Ubuntu:300,400,600,400italic' rel='stylesheet' type='text/css'>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  <!-- you don't need to keep this, but it's cool for stats! -->
  <meta name="generator" content="Nanoc 4.4.2">
</head>

  <body>
    <div class="header">
  <a href="../../index.html">
    <img src="../../assets/images/gitlab-logo.svg"/>
    <p>GitLab 中文文档</p>
  </a>
  <div class="nav-container">
    <a class="nav-toggle" id="docs-nav-toggle">Menu</a>
    <ul class="nav">
      <li class="search"><input type="text" class="st-default-search-input" placeholder="Search"></li>
      
        <li class="nav-item">
          <a href="../README.html">
            Community Edition
          </a>
        </li>
      
        <li class="nav-item">
          <a href="../../ee/README.html">
            Enterprise Edition
          </a>
        </li>
      
        <li class="nav-item">
          <a href="../../omnibus/README.html">
            Omnibus
          </a>
        </li>
      
        <li class="nav-item">
          <a href="../../runner/index.html">
            Runner
          </a>
        </li>
      
    </ul>
  </div>
</div>

    <div class="main class">
      
        <ul class="breadcrumbs">
          
          
            
              <li class="breadcrumb"><a href="../README.html">Documentation</a></li>
            
              <li class="breadcrumb"><a href="README.html">Profile Settings</a></li>
            
          
          <li class="breadcrumb">Two-factor Authentication (2FA)</li>
        </ul>
      
      <ul>
<li>
<a href="two_factor_authentication.html#two-factor-authentication-2fa">Two-factor Authentication (2FA)</a>
<ul>
<li>
<a href="two_factor_authentication.html#enabling-2fa">Enabling 2FA</a>
<ul>
<li>
<a href="two_factor_authentication.html#enable-2fa-via-mobile-application">Enable 2FA via mobile application</a>
</li>
<li>
<a href="two_factor_authentication.html#enable-2fa-via-u2f-device">Enable 2FA via U2F device</a>
</li>
</ul>
</li>
<li>
<a href="two_factor_authentication.html#recovery-codes">Recovery Codes</a>
</li>
<li>
<a href="two_factor_authentication.html#logging-in-with-2fa-enabled">Logging in with 2FA Enabled</a>
<ul>
<li>
<a href="two_factor_authentication.html#log-in-via-mobile-application">Log in via mobile application</a>
</li>
<li>
<a href="two_factor_authentication.html#log-in-via-u2f-device">Log in via U2F device</a>
</li>
</ul>
</li>
<li>
<a href="two_factor_authentication.html#disabling-2fa">Disabling 2FA</a>
</li>
<li>
<a href="two_factor_authentication.html#personal-access-tokens">Personal access tokens</a>
</li>
<li>
<a href="two_factor_authentication.html#note-to-gitlab-administrators">Note to GitLab administrators</a>
</li>
</ul>
</li>
</ul>
<h1 id='two-factor-authentication-2fa'>Two-factor Authentication (2FA) <a class='anchor' href='two_factor_authentication.html#two-factor-authentication-2fa' title='Permalink'></a></h1>
<p>Two-factor Authentication (2FA) provides an additional level of security to your
GitLab account. Once enabled, in addition to supplying your username and
password to login, you&#39;ll be prompted for a code generated by an application on
your phone.</p>

<p>By enabling 2FA, the only way someone other than you can log into your account
is to know your username and password <em>and</em> have access to your phone.</p>

<blockquote>
<p><strong>Note:</strong>
When you enable 2FA, don&#39;t forget to back up your recovery codes. For your safety, if you
lose your codes for GitLab.com, we can&#39;t disable or recover them.  </p>
</blockquote>

<p>In addition to a phone application, GitLab supports U2F (universal 2nd factor) devices as
the second factor of authentication. Once enabled, in addition to supplying your username and
password to login, you&#39;ll be prompted to activate your U2F device (usually by pressing
a button on it), and it will perform secure authentication on your behalf.</p>

<blockquote>
<p><strong>Note:</strong> Support for U2F devices was added in version 8.8</p>
</blockquote>

<p>The U2F workflow is only supported by Google Chrome at this point, so we <em>strongly</em> recommend 
that you set up both methods of two-factor authentication, so you can still access your account 
from other browsers.</p>

<blockquote>
<p><strong>Note:</strong> GitLab officially only supports <a href="https://www.yubico.com/products/yubikey-hardware/">Yubikey</a> U2F devices.</p>
</blockquote>
<h2 id='enabling-2fa'>Enabling 2FA <a class='anchor' href='two_factor_authentication.html#enabling-2fa' title='Permalink'></a></h2><h3 id='enable-2fa-via-mobile-application'>Enable 2FA via mobile application <a class='anchor' href='two_factor_authentication.html#enable-2fa-via-mobile-application' title='Permalink'></a></h3>
<p><strong>In GitLab:</strong></p>

<ol>
<li>Log in to your GitLab account.</li>
<li>Go to your <strong>Profile Settings</strong>.</li>
<li>Go to <strong>Account</strong>.</li>
<li>Click <strong>Enable Two-factor Authentication</strong>.</li>
</ol>

<p><a target="_blank" href="2fa.png"><img src="2fa.png" title="" alt="Two-factor setup"/></a></p>

<p><strong>On your phone:</strong></p>

<ol>
<li>Install a compatible application. We recommend <a href="https://support.google.com/accounts/answer/1066447?hl=en">Google Authenticator</a>
(proprietary) or <a href="https://fedorahosted.org/freeotp/">FreeOTP</a> (open source).</li>
<li>In the application, add a new entry in one of two ways:

<ul>
<li>Scan the code with your phone&#39;s camera to add the entry automatically.</li>
<li>Enter the details provided to add the entry manually.</li>
</ul></li>
</ol>

<p><strong>In GitLab:</strong></p>

<ol>
<li>Enter the six-digit pin number from the entry on your phone into the <strong>Pin
code</strong> field.</li>
<li>Click <strong>Submit</strong>.</li>
</ol>

<p>If the pin you entered was correct, you&#39;ll see a message indicating that
Two-Factor Authentication has been enabled, and you&#39;ll be presented with a list
of recovery codes.</p>
<h3 id='enable-2fa-via-u2f-device'>Enable 2FA via U2F device <a class='anchor' href='two_factor_authentication.html#enable-2fa-via-u2f-device' title='Permalink'></a></h3>
<p><strong>In GitLab:</strong></p>

<ol>
<li>Log in to your GitLab account.</li>
<li>Go to your <strong>Profile Settings</strong>.</li>
<li>Go to <strong>Account</strong>.</li>
<li>Click <strong>Enable Two-Factor Authentication</strong>.</li>
<li>Plug in your U2F device.</li>
<li>Click on <strong>Setup New U2F Device</strong>.</li>
<li>A light will start blinking on your device. Activate it by pressing its button.</li>
</ol>

<p>You will see a message indicating that your device was successfully set up. 
Click on <strong>Register U2F Device</strong> to complete the process.</p>

<p><a target="_blank" href="2fa_u2f_register.png"><img src="2fa_u2f_register.png" title="" alt="Two-Factor U2F Setup"/></a></p>
<h2 id='recovery-codes'>Recovery Codes <a class='anchor' href='two_factor_authentication.html#recovery-codes' title='Permalink'></a></h2>
<p>Should you ever lose access to your phone, you can use one of the ten provided
backup codes to login to your account. We suggest copying or printing them for
storage in a safe place. <strong>Each code can be used only once</strong> to log in to your
account.</p>

<p>If you lose the recovery codes or just want to generate new ones, you can do so
from the <strong>Profile Settings</strong> &gt; <strong>Account</strong> page where you first enabled 2FA.</p>

<blockquote>
<p><strong>Note:</strong> Recovery codes are not generated for U2F devices.</p>
</blockquote>
<h2 id='logging-in-with-2fa-enabled'>Logging in with 2FA Enabled <a class='anchor' href='two_factor_authentication.html#logging-in-with-2fa-enabled' title='Permalink'></a></h2>
<p>Logging in with 2FA enabled is only slightly different than a normal login.
Enter your username and password credentials as you normally would, and you&#39;ll
be presented with a second prompt, depending on which type of 2FA you&#39;ve enabled.</p>
<h3 id='log-in-via-mobile-application'>Log in via mobile application <a class='anchor' href='two_factor_authentication.html#log-in-via-mobile-application' title='Permalink'></a></h3>
<p>Enter the pin from your phone&#39;s application or a recovery code to log in.</p>

<p><a target="_blank" href="2fa_auth.png"><img src="2fa_auth.png" title="" alt="Two-Factor Authentication on sign in via OTP"/></a></p>
<h3 id='log-in-via-u2f-device'>Log in via U2F device <a class='anchor' href='two_factor_authentication.html#log-in-via-u2f-device' title='Permalink'></a></h3>
<ol>
<li>Click <strong>Login via U2F Device</strong></li>
<li>A light will start blinking on your device. Activate it by pressing its button.</li>
</ol>

<p>You will see a message indicating that your device responded to the authentication request.
Click on <strong>Authenticate via U2F Device</strong> to complete the process.</p>

<p><a target="_blank" href="2fa_u2f_authenticate.png"><img src="2fa_u2f_authenticate.png" title="" alt="Two-Factor Authentication on sign in via U2F device"/></a></p>
<h2 id='disabling-2fa'>Disabling 2FA <a class='anchor' href='two_factor_authentication.html#disabling-2fa' title='Permalink'></a></h2>
<ol>
<li>Log in to your GitLab account.</li>
<li>Go to your <strong>Profile Settings</strong>.</li>
<li>Go to <strong>Account</strong>.</li>
<li>Click <strong>Disable</strong>, under <strong>Two-Factor Authentication</strong>.</li>
</ol>

<p>This will clear all your two-factor authentication registrations, including mobile
applications and U2F devices.</p>
<h2 id='personal-access-tokens'>Personal access tokens <a class='anchor' href='two_factor_authentication.html#personal-access-tokens' title='Permalink'></a></h2>
<p>When 2FA is enabled, you can no longer use your normal account password to
authenticate with Git over HTTPS on the command line, you must use a personal
access token instead.</p>

<ol>
<li>Log in to your GitLab account.</li>
<li>Go to your <strong>Profile Settings</strong>.</li>
<li>Go to <strong>Access Tokens</strong>.</li>
<li>Choose a name and expiry date for the token.</li>
<li>Click on <strong>Create Personal Access Token</strong>. </li>
<li>Save the personal access token somewhere safe.</li>
</ol>

<p>When using git over HTTPS on the command line, enter the personal access token
into the password field.</p>
<h2 id='note-to-gitlab-administrators'>Note to GitLab administrators <a class='anchor' href='two_factor_authentication.html#note-to-gitlab-administrators' title='Permalink'></a></h2>
<p>You need to take special care to that 2FA keeps working after
<a href="../raketasks/backup_restore.html">restoring a GitLab backup</a>.</p>

      <hr>
      <!--插入畅言评论框-->
      <!--PC和WAP自适应版-->
<div id="SOHUCS" ></div>
<script type="text/javascript">
(function(){
var appid = 'cysJws232';
var conf = 'prod_75287b5b4916f1a8a49f289fd9f44e32';
var width = window.innerWidth || document.documentElement.clientWidth;
if (width < 960) {
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>

      <footer>
        <a href='https://gitlab.com/gitlab-org/gitlab-ce/blob/master/doc/profile/two_factor_authentication.md'>Improve this documentation on GitLab.com</a>
        <a href="https://gitlab.com/gitlab-com/gitlab-docs">View the source code of this site</a>
      </footer>
    </div>
  </body>

  <!-- Baidu analytics -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?32465a463ee9e0febe2ad3f353d247fc";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

<!-- Baidu Push -->
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

<!-- Swiftype search engine -->
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','sSywtTjozQxL11PWiwA7','2.0.0');
</script>

<!-- Marketo -->
<script type="text/javascript">
  (function() {
    var didInit = false;
    function initMunchkin() {
      if(didInit === false) {
        didInit = true;
        Munchkin.init('194-VVC-221');
      }
    }
    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = '//munchkin.marketo.net/munchkin.js';
    s.onreadystatechange = function() {
      if (this.readyState == 'complete' || this.readyState == 'loaded') {
        initMunchkin();
      }
    };
    s.onload = initMunchkin;
    document.getElementsByTagName('head')[0].appendChild(s);
  })();
</script>

</html>
