<!DOCTYPE HTML>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <title>How we manage the TLS protocol CRIME vulnerability - GitLab中文文档</title>
  <meta name="description" content="GitLab中文社区提供GitLab社区版，GitLab企业版，Omnibus GitLab，GitLab Runner全系列中文文档！">
  <link rel="stylesheet" href="../../assets/stylesheets/stylesheet-v6.css">
  <link rel="stylesheet" href="../../assets/stylesheets/highlight-v4.css">
  <script async src="../../assets/javascripts/docs.js"></script>
  <link href='https://fonts.proxy.ustclug.org/css?family=Ubuntu:300,400,600,400italic' rel='stylesheet' type='text/css'>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  <!-- you don't need to keep this, but it's cool for stats! -->
  <meta name="generator" content="Nanoc 4.4.2">
</head>

  <body>
    <div class="header">
  <a href="../../index.html">
    <img src="../../assets/images/gitlab-logo.svg"/>
    <p>GitLab 中文文档</p>
  </a>
  <div class="nav-container">
    <a class="nav-toggle" id="docs-nav-toggle">Menu</a>
    <ul class="nav">
      <li class="search"><input type="text" class="st-default-search-input" placeholder="Search"></li>
      
        <li class="nav-item">
          <a href="../../ce/README.html">
            Community Edition
          </a>
        </li>
      
        <li class="nav-item">
          <a href="../README.html">
            Enterprise Edition
          </a>
        </li>
      
        <li class="nav-item">
          <a href="../../omnibus/README.html">
            Omnibus
          </a>
        </li>
      
        <li class="nav-item">
          <a href="../../runner/index.html">
            Runner
          </a>
        </li>
      
    </ul>
  </div>
</div>

    <div class="main class">
      
        <ul class="breadcrumbs">
          
          
            
              <li class="breadcrumb"><a href="../README.html">Documentation</a></li>
            
              <li class="breadcrumb"><a href="README.html">Security</a></li>
            
          
          <li class="breadcrumb">How we manage the TLS protocol CRIME vulnerability</li>
        </ul>
      
      <ul>
<li>
<a href="crime_vulnerability.html#how-we-manage-the-tls-protocol-crime-vulnerability">How we manage the TLS protocol CRIME vulnerability</a>
<ul>
<li>
<ul>
<li>
<a href="crime_vulnerability.html#description">Description</a>
</li>
<li>
<a href="crime_vulnerability.html#nessus">Nessus</a>
</li>
<li>
<a href="crime_vulnerability.html#references">References</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1 id='how-we-manage-the-tls-protocol-crime-vulnerability'>How we manage the TLS protocol CRIME vulnerability <a class='anchor' href='crime_vulnerability.html#how-we-manage-the-tls-protocol-crime-vulnerability' title='Permalink'></a></h1>
<blockquote>
<p>CRIME (&quot;Compression Ratio Info-leak Made Easy&quot;) is a security exploit against
secret web cookies over connections using the HTTPS and SPDY protocols that also
use data compression. When used to recover the content of secret
authentication cookies, it allows an attacker to perform session hijacking on an
authenticated web session, allowing the launching of further attacks.
(<a href="https://en.wikipedia.org/w/index.php?title=CRIME&amp;oldid=692423806">CRIME</a>)</p>
</blockquote>
<h3 id='description'>Description <a class='anchor' href='crime_vulnerability.html#description' title='Permalink'></a></h3>
<p>The TLS Protocol CRIME Vulnerability affects compression over HTTPS, therefore
it warns against using SSL Compression (for example gzip) or SPDY which
optionally uses compression as well.</p>

<p>GitLab supports both gzip and <a href="http://nginx.org/en/docs/http/ngx_http_spdy_module.html">SPDY</a> and mitigates the CRIME
vulnerability by deactivating gzip when HTTPS is enabled. You can see the
sources of the files in question:</p>

<ul>
<li><a href="https://gitlab.com/gitlab-org/gitlab-ce/blob/master/lib/support/nginx/gitlab-ssl">Source installation NGINX file</a></li>
<li><a href="https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/files/gitlab-cookbooks/gitlab/templates/default/nginx-gitlab-http.conf.erb">Omnibus installation NGINX file</a></li>
</ul>

<p>Although SPDY is enabled in Omnibus installations, CRIME relies on compression
(the &#39;C&#39;) and the default compression level in NGINX&#39;s SPDY module is 0
(no compression).</p>
<h3 id='nessus'>Nessus <a class='anchor' href='crime_vulnerability.html#nessus' title='Permalink'></a></h3>
<p>The Nessus scanner, <a href="https://www.tenable.com/plugins/index.php?view=single&amp;id=62565">reports a possible CRIME vulnerability</a> in GitLab
similar to the following format:</p>
<pre class="highlight plaintext"><code>Description

This remote service has one of two configurations that are known to be required for the CRIME attack:
SSL/TLS compression is enabled.
TLS advertises the SPDY protocol earlier than version 4.

...

Output

The following configuration indicates that the remote service may be vulnerable to the CRIME attack:
SPDY support earlier than version 4 is advertised.
</code></pre>
<p>From the report above it is important to note that Nessus is only checking if
TLS advertises the SPDY protocol earlier than version 4, it does not perform an
attack nor does it check if compression is enabled. With just this approach, it
cannot tell that SPDY&#39;s compression is disabled and not subject to the CRIME
vulnerability.</p>
<h3 id='references'>References <a class='anchor' href='crime_vulnerability.html#references' title='Permalink'></a></h3>
<ul>
<li>Nginx <a href="http://nginx.org/en/docs/http/ngx_http_spdy_module.html">&quot;Module ngx_http_spdy_module&quot;</a></li>
<li>Tenable Network Security, Inc. <a href="https://www.tenable.com/plugins/index.php?view=single&amp;id=62565">&quot;Transport Layer Security (TLS) Protocol CRIME Vulnerability&quot;</a></li>
<li>Wikipedia contributors, <a href="https://en.wikipedia.org/wiki/CRIME">&quot;CRIME&quot;</a> Wikipedia, The Free Encyclopedia</li>
</ul>

      <hr>
      <!--插入畅言评论框-->
      <!--PC和WAP自适应版-->
<div id="SOHUCS" ></div>
<script type="text/javascript">
(function(){
var appid = 'cysJws232';
var conf = 'prod_75287b5b4916f1a8a49f289fd9f44e32';
var width = window.innerWidth || document.documentElement.clientWidth;
if (width < 960) {
window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>

      <footer>
        <a href='https://gitlab.com/gitlab-org/gitlab-ee/blob/master/doc/security/crime_vulnerability.md'>Improve this documentation on GitLab.com</a>
        <a href="https://gitlab.com/gitlab-com/gitlab-docs">View the source code of this site</a>
      </footer>
    </div>
  </body>

  <!-- Baidu analytics -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?32465a463ee9e0febe2ad3f353d247fc";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>

<!-- Baidu Push -->
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

<!-- Swiftype search engine -->
<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install','sSywtTjozQxL11PWiwA7','2.0.0');
</script>

<!-- Marketo -->
<script type="text/javascript">
  (function() {
    var didInit = false;
    function initMunchkin() {
      if(didInit === false) {
        didInit = true;
        Munchkin.init('194-VVC-221');
      }
    }
    var s = document.createElement('script');
    s.type = 'text/javascript';
    s.async = true;
    s.src = '//munchkin.marketo.net/munchkin.js';
    s.onreadystatechange = function() {
      if (this.readyState == 'complete' || this.readyState == 'loaded') {
        initMunchkin();
      }
    };
    s.onload = initMunchkin;
    document.getElementsByTagName('head')[0].appendChild(s);
  })();
</script>

</html>
